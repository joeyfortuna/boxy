<html>
<head>
<script src="js/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="js/box2dweb.min.js"></script>
<script type="text/javascript" src="js/boxy.js"></script>
<script type="text/javascript" src="js/boxy_helpers.js"></script>

<script>

function contact(a, b) {

}

function update(ctx) {
	var pa=boxy.getBodyAttr('ball1', 'pos');
	var pb=boxy.getBodyAttr('ball2', 'pos');
	var pc=boxy.getBodyAttr('ball3', 'pos');
	var pd=boxy.getBodyAttr('ball4', 'pos');

	
	/*
	ctx.beginPath();
    ctx.straightLine(pa.x, pa.y, pb.x, pb.y);
  	ctx.lineWidth=4;
    ctx.strokeStyle='#ffff00';
   	ctx.stroke();
   	
   	ctx.beginPath();
   	ctx.dashedLine(pa.x, pa.y, pb.x, pb.y);
   	ctx.strokeStyle='#ff0000';
   	ctx.stroke();
   	*/
   	ctx.beginPath();
   	ctx.moveTo(0, 0);
   	ctx.bezierCurveTo(pa.x, pa.y, pb.x, pb.y, 500, 0);
   	ctx.lineWidth=4;
   	ctx.strokeStyle='#0000ff';
   	ctx.stroke();
   	
   	ctx.beginPath();
   	ctx.moveTo(500, 0);
   	ctx.bezierCurveTo(pb.x, pb.y, pc.x, pc.y, 500, 500);
   	ctx.lineWidth=4;
   	ctx.strokeStyle='#ff00ff';
   	ctx.stroke();
   	
   	ctx.beginPath();
   	ctx.moveTo(500, 500);
   	ctx.bezierCurveTo(pc.x, pc.y, pd.x, pd.y, 0, 500);
   	ctx.lineWidth=4;
   	ctx.strokeStyle='#00ff00';
   	ctx.stroke();
   	
   	ctx.beginPath();
   	ctx.moveTo(0, 500);
   	ctx.bezierCurveTo(pd.x, pd.y, pa.x, pa.y, 0, 0);
   	ctx.lineWidth=4;
   	ctx.strokeStyle='#ff0000';
   	ctx.stroke();
   	
   	
   	
}

function initPage() {
	boxy= BOXY("canvas");
		
      	//boxy.setDebug();
      	boxy.setUpdate();
      	//boxy.toggleGravity();
      	//boxy.setContactCallback(contact);
      	boxy.setUpdateCallback(update);  
      	var ball1=boxy.makeDynamicBall('ball1', .7, 2, 1);
      	var ball2=boxy.clone('ball1','ball2', 15, 1);
      	var ball3=boxy.clone('ball1','ball3', 15, 10);
      	var ball4=boxy.clone('ball1','ball4', 2, 10);
    	boxy.makeRevoluteJoint({aid:'ball1',bid:'ball2'});
        boxy.makeRevoluteJoint({aid:'ball2',bid:'ball3'});
        boxy.makeRevoluteJoint({aid:'ball3',bid:'ball4'});
        boxy.setBodyImage('ball1', 'images/dot.png', 50, 50);
      	boxy.setBodyImage('ball2', 'images/dot.png', 50, 50);
      	boxy.setBodyImage('ball3', 'images/dot.png', 50, 50);
      	boxy.setBodyImage('ball4', 'images/dot.png', 50, 50);
      	//boxy.setBodyImage('box1', 'images/baton.jpg', 16, 100);
      	
}
</script>


</head>
<body onload="initPage();">
<center>
<canvas id="canvas" width="500" height="500"
			style="background-color:#ffffff;border:2px solid #898989;"></canvas>


</body>
</html>